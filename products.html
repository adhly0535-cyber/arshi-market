<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Arshi Market</title>

<style>
body{
  font-family: Arial;
  margin:0;
  padding-bottom:70px;
  background:#f5f5f5;
}

.country-name{
  background:#4CAF50;
  color:#fff;
  text-align:center;
  padding:8px;
  font-weight:bold;
  cursor:pointer;
}

/* Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª + Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª */
.categories{
  display:flex;
  gap:8px;
  padding:10px;
  background:#fff;
  overflow-x:auto;
}

.categories button{
  border:none;
  background:#eee;
  padding:8px 14px;
  border-radius:20px;
  cursor:pointer;
  white-space:nowrap;
}

#addBtn{
  display:none;
  background:#4CAF50;
  color:#fff;
}

/* Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª */
.products{
  padding:10px;
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  gap:10px;
}

.product-card{
  background:#fff;
  padding:6px;
  border-radius:10px;
  font-size:13px;
}

.main-img{
  width:100%;
  height:90px;
  object-fit:cover;
  border-radius:8px;
}

/* Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… */
.user-bar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:6px;
}

.user{
  display:flex;
  align-items:center;
  gap:5px;
}

.user img{
  width:26px;
  height:26px;
  border-radius:50%;
}

.chat-btn{
  background:#4CAF50;
  color:#fff;
  border:none;
  padding:4px 8px;
  border-radius:14px;
  font-size:12px;
  cursor:pointer;
}

/* Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø³ÙÙ„ÙŠ */
.bottom-nav{
  position:fixed;
  bottom:0;
  width:100%;
  background:#fff;
  display:flex;
  justify-content:space-around;
  padding:10px 0;
  border-top:1px solid #ccc;
}

.bottom-nav button{
  background:none;
  border:none;
  font-size:14px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="country-name" id="countryName"></div>

<!-- Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª -->
<div class="categories">
  <button onclick="selectCategory('Ø³ÙŠØ§Ø±Ø§Øª')">ğŸš— Ø³ÙŠØ§Ø±Ø§Øª</button>
  <button onclick="selectCategory('Ø¨ÙŠÙˆØª')">ğŸ  Ø¨ÙŠÙˆØª</button>
  <button onclick="selectCategory('Ù‡ÙˆØ§ØªÙ')">ğŸ“± Ù‡ÙˆØ§ØªÙ</button>
  <button onclick="selectCategory('Ø£Ø®Ø±Ù‰')">â• Ø£Ø®Ø±Ù‰</button>
  <button id="addBtn" onclick="goAddProduct()">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</button>
</div>

<!-- Ø´Ø±ÙŠØ· Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª -->
<div class="categories" id="areasBar" style="display:none"></div>

<div class="products" id="products"></div>

<div class="bottom-nav">
  <button onclick="go('products.html')">ğŸ <br>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
  <button onclick="go('chat.html')">ğŸ’¬<br>Ø§Ù„Ø´Ø§Øª</button>
  <button onclick="go('account.html')">ğŸ‘¤<br>Ø§Ù„Ø­Ø³Ø§Ø¨</button>
  <button onclick="go('settings.html')">âš™ï¸<br>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</button>
</div>

<script>
/* ===== Ø§Ù„Ø¯ÙˆÙ„Ø© ===== */
const userCountry = localStorage.getItem('country');
if(!userCountry){
  window.location.href='country.html';
}
document.getElementById('countryName').innerText = 'ğŸ“ Ø§Ù„Ø¯ÙˆÙ„Ø©: ' + userCountry;
document.getElementById('countryName').onclick = ()=>window.location.href='country.html';

/* ===== Ø§Ù„ÙˆÙ„Ø§ÙŠØ§Øª Ù„ÙƒÙ„ Ø¯ÙˆÙ„Ø© ===== */
const areasByCountry = {
  "Ø§Ù„Ø³ÙˆØ¯Ø§Ù†":[
    "Ø§Ù„Ø®Ø±Ø·ÙˆÙ…","Ø£Ù… Ø¯Ø±Ù…Ø§Ù†","Ø¨Ø­Ø±ÙŠ","Ø§Ù„Ø¬Ø²ÙŠØ±Ø©","ÙƒØ³Ù„Ø§","Ø§Ù„Ù‚Ø¶Ø§Ø±Ù",
    "Ø³Ù†Ø§Ø±","Ø§Ù„Ù†ÙŠÙ„ Ø§Ù„Ø£Ø¨ÙŠØ¶","Ù†Ù‡Ø± Ø§Ù„Ù†ÙŠÙ„","Ø§Ù„Ø¨Ø­Ø± Ø§Ù„Ø£Ø­Ù…Ø±",
    "Ø´Ù…Ø§Ù„ ÙƒØ±Ø¯ÙØ§Ù†","Ø¬Ù†ÙˆØ¨ ÙƒØ±Ø¯ÙØ§Ù†","Ø´Ù…Ø§Ù„ Ø¯Ø§Ø±ÙÙˆØ±","Ø¬Ù†ÙˆØ¨ Ø¯Ø§Ø±ÙÙˆØ±",
    "ØºØ±Ø¨ Ø¯Ø§Ø±ÙÙˆØ±","ÙˆØ³Ø· Ø¯Ø§Ø±ÙÙˆØ±","Ø´Ø±Ù‚ Ø¯Ø§Ø±ÙÙˆØ±"
  ],
  "Ù…ØµØ±":[
    "Ø§Ù„Ù‚Ø§Ù‡Ø±Ø©","Ø§Ù„Ø¬ÙŠØ²Ø©","Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ©","Ø§Ù„Ø¯Ù‚Ù‡Ù„ÙŠØ©","Ø§Ù„Ø´Ø±Ù‚ÙŠØ©",
    "Ø§Ù„Ù…Ù†ÙˆÙÙŠØ©","Ø§Ù„ØºØ±Ø¨ÙŠØ©","Ø£Ø³ÙŠÙˆØ·","Ø³ÙˆÙ‡Ø§Ø¬","Ù‚Ù†Ø§","Ø§Ù„Ø£Ù‚ØµØ±"
  ]
};

let currentCategory = '';
let currentArea = '';

/* ===== Ù…Ù†ØªØ¬Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© ===== */
const products = [
{
  country:'Ø§Ù„Ø³ÙˆØ¯Ø§Ù†',
  category:'Ø³ÙŠØ§Ø±Ø§Øª',
  area:'Ø¨Ø­Ø±ÙŠ',
  desc:'Ø³ÙŠØ§Ø±Ø© Ù†Ø¸ÙŠÙØ© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø´Ø®ØµÙŠ',
  price:'10,000$',
  user:'Ahmed',
  userImg:'https://i.pravatar.cc/50?img=1',
  images:['https://source.unsplash.com/300x200/?car']
},
{
  country:'Ø§Ù„Ø³ÙˆØ¯Ø§Ù†',
  category:'Ø¨ÙŠÙˆØª',
  area:'Ø§Ù„Ø®Ø±Ø·ÙˆÙ…',
  desc:'Ù…Ù†Ø²Ù„ Ù…Ù…ØªØ§Ø²',
  price:'45,000$',
  user:'Mohamed',
  userImg:'https://i.pravatar.cc/50?img=3',
  images:['https://source.unsplash.com/300x200/?house']
}
];

function selectCategory(cat){
  currentCategory = cat;
  document.getElementById('addBtn').style.display='inline-block';
  showAreas();
}

function showAreas(){
  const bar = document.getElementById('areasBar');
  bar.innerHTML='';
  bar.style.display='flex';

  const areas = areasByCountry[userCountry];
  if(!areas){
    bar.innerHTML='<span>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆÙ„Ø§ÙŠØ§Øª</span>';
    return;
  }

  areas.forEach(a=>{
    const btn=document.createElement('button');
    btn.innerText='ğŸ“ '+a;
    btn.onclick=()=>selectArea(a);
    bar.appendChild(btn);
  });

  document.getElementById('products').innerHTML='<p>Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ„Ø§ÙŠØ©</p>';
}

function selectArea(area){
  currentArea = area;

  const filtered = products.filter(p =>
    p.country===userCountry &&
    p.category===currentCategory &&
    p.area===currentArea
  );

  displayProducts(filtered);
}

function displayProducts(list){
  const div=document.getElementById('products');
  div.innerHTML = list.length ? '' : '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª</p>';

  list.forEach(p=>{
    div.innerHTML += `
    <div class="product-card">
      <img class="main-img" src="${p.images[0]}">
      <p><b>${p.area}</b></p>
      <p>${p.desc}</p>
      <b>${p.price}</b>
      <div class="user-bar">
        <div class="user">
          <img src="${p.userImg}"> ${p.user}
        </div>
        <button class="chat-btn" onclick="go('chat.html')">Ù…Ø±Ø§Ø³Ù„Ø©</button>
      </div>
    </div>`;
  });
}

function goAddProduct(){
  window.location.href='add-product.html?cat='+currentCategory;
}
function go(p){ window.location.href=p; }
</script>

</body>
</html>
    
