<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</title>

<style>
body{
  margin:0;
  font-family: Arial;
  background:#f5f5f5;
  direction: rtl;
}

.header{
  background:#4CAF50;
  color:#fff;
  padding:12px;
  text-align:center;
  font-weight:bold;
}

.section{
  background:#fff;
  margin:10px;
  border-radius:10px;
  padding:12px;
}

.section h3{
  margin:0 0 10px;
  font-size:16px;
}

.item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:10px 0;
  border-bottom:1px solid #eee;
  font-size:14px;
}

.item:last-child{
  border-bottom:none;
}

button{
  border:none;
  background:#4CAF50;
  color:#fff;
  padding:6px 12px;
  border-radius:20px;
  cursor:pointer;
  font-size:13px;
}

.switch{
  transform: scale(1.2);
}

.logout{
  background:#e53935;
}

.back{
  margin:15px;
  width:calc(100% - 30px);
}
</style>
</head>

<body>

<div class="header">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</div>

<div class="section">
  <h3>ğŸŒ Ø§Ù„Ø¯ÙˆÙ„Ø©</h3>
  <div class="item">
    <span id="countryName">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</span>
    <button onclick="changeCountry()">ØªØºÙŠÙŠØ±</button>
  </div>
</div>

<div class="section">
  <h3>ğŸŒ Ø§Ù„Ù„ØºØ©</h3>
  <div class="item">
    <span>Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</span>
    <button>ØªØºÙŠÙŠØ±</button>
  </div>
</div>

<div class="section">
  <h3>ğŸ”” Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</h3>
  <div class="item">
    <span>ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª</span>
    <input type="checkbox" class="switch" checked>
  </div>
</div>

<div class="section">
  <h3>ğŸšª Ø§Ù„Ø­Ø³Ø§Ø¨</h3>
  <div class="item">
    <span>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</span>
    <button class="logout" onclick="logout()">Ø®Ø±ÙˆØ¬</button>
  </div>
</div>

<button class="back" onclick="goHome()">â¬…ï¸ Ø§Ù„Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyD3hAvhSDs-lX7ORCOR0DODT3l_S_gJA2o",
  authDomain: "arshi-market.firebaseapp.com",
  projectId: "arshi-market",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

onAuthStateChanged(auth, async(user)=>{
  if(!user){
    window.location.href="index.html";
    return;
  }

  const snap = await getDoc(doc(db,"users",user.uid));

  if(snap.exists()){
    const data = snap.data();
    document.getElementById("countryName").innerText =
      data.country || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©";
  }else{
    document.getElementById("countryName").innerText = "ØºÙŠØ± Ù…Ø­Ø¯Ø¯Ø©";
  }
});

window.changeCountry=()=>{
  window.location.href = "country.html";
};

window.logout=()=>{
  signOut(auth).then(()=>{
    window.location.href="index.html";
  });
};

window.goHome=()=>{
  window.location.href="products.html";
};
</script>

</body>
</html>
